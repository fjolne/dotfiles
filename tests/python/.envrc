use flake

if [ ! -d .venv ]; then
  uv venv --python 3.12
fi

source .venv/bin/activate

# Install jupyter kernel support for molten-nvim
uv pip install --quiet ipykernel matplotlib polars

# Add venv's jupyter data dir to JUPYTER_PATH so molten sees local kernels
export JUPYTER_PATH="$PWD/.venv/share/jupyter"

# Install kernel to venv (always reinstall to ensure correct python path)
python -m ipykernel install --prefix=.venv --name python3 --display-name "Python (venv)" 2>/dev/null || true
